<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.10.0" />
<title>wiki.web.forms API documentation</title>
<meta name="description" content="Forms
~~~~~" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>wiki.web.forms</code></h1>
</header>
<section id="section-intro">
<p>Forms
~~~~~</p>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">&#34;&#34;&#34;
    Forms
    ~~~~~
&#34;&#34;&#34;
from flask_wtf import Form
from wtforms import BooleanField
from wtforms import TextField
from wtforms import TextAreaField
from wtforms import PasswordField
from wtforms.validators import InputRequired
from wtforms.validators import ValidationError

from wiki.core import clean_url
from wiki.web import current_wiki
from wiki.web import current_users


class URLForm(Form):
    url = TextField(&#39;&#39;, [InputRequired()])

    def validate_url(form, field):
        if current_wiki.exists(field.data):
            raise ValidationError(&#39;The URL &#34;%s&#34; exists already.&#39; % field.data)

    def clean_url(self, url):
        return clean_url(url)


class SearchForm(Form):
    term = TextField(&#39;&#39;, [InputRequired()])
    ignore_case = BooleanField(
        description=&#39;Ignore Case&#39;,
        # FIXME: default is not correctly populated
        default=True)


class EditorForm(Form):
    title = TextField(&#39;&#39;, [InputRequired()])
    body = TextAreaField(&#39;&#39;, [InputRequired()])
    tags = TextField(&#39;&#39;)


class LoginForm(Form):
    name = TextField(&#39;&#39;, [InputRequired()])
    password = PasswordField(&#39;&#39;, [InputRequired()])

    def validate_name(form, field):
        user = current_users.get_user(field.data)
        if not user:
            raise ValidationError(&#39;This username does not exist.&#39;)

    def validate_password(form, field):
        user = current_users.get_user(form.name.data)
        if not user:
            return
        if not user.check_password(field.data):
            raise ValidationError(&#39;Username and password do not match.&#39;)</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="wiki.web.forms.EditorForm"><code class="flex name class">
<span>class <span class="ident">EditorForm</span></span>
<span>(</span><span>*args, **kwargs)</span>
</code></dt>
<dd>
<div class="desc"><div class="admonition deprecated">
<p class="admonition-title">Deprecated since version:&ensp;0.13</p>
<p>Renamed to :class:<code>~flask_wtf.FlaskForm</code>.</p>
</div>
<p>:param formdata:
Used to pass data coming from the enduser, usually <code>request.POST</code> or
equivalent. formdata should be some sort of request-data wrapper which
can get multiple parameters from the form input, and values are unicode
strings, e.g. a Werkzeug/Django/WebOb MultiDict
:param obj:
If <code>formdata</code> is empty or not provided, this object is checked for
attributes matching form field names, which will be used for field
values.
:param prefix:
If provided, all fields will have their name prefixed with the
value.
:param data:
Accept a dictionary of data. This is only used if <code>formdata</code> and
<code>obj</code> are not present.
:param meta:
If provided, this is a dictionary of values to override attributes
on this form's meta instance.
:param <code>**kwargs</code>:
If <code>formdata</code> is empty or not provided and <code>obj</code> does not contain
an attribute named the same as a field, form will assign the value
of a matching keyword argument to the field, if one exists.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class EditorForm(Form):
    title = TextField(&#39;&#39;, [InputRequired()])
    body = TextAreaField(&#39;&#39;, [InputRequired()])
    tags = TextField(&#39;&#39;)</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>flask_wtf.form.Form</li>
<li>flask_wtf.form.FlaskForm</li>
<li>wtforms.form.Form</li>
<li>wtforms.compat.NewBase</li>
<li>wtforms.form.BaseForm</li>
</ul>
<h3>Class variables</h3>
<dl>
<dt id="wiki.web.forms.EditorForm.body"><code class="name">var <span class="ident">body</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="wiki.web.forms.EditorForm.tags"><code class="name">var <span class="ident">tags</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="wiki.web.forms.EditorForm.title"><code class="name">var <span class="ident">title</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
</dd>
<dt id="wiki.web.forms.LoginForm"><code class="flex name class">
<span>class <span class="ident">LoginForm</span></span>
<span>(</span><span>*args, **kwargs)</span>
</code></dt>
<dd>
<div class="desc"><div class="admonition deprecated">
<p class="admonition-title">Deprecated since version:&ensp;0.13</p>
<p>Renamed to :class:<code>~flask_wtf.FlaskForm</code>.</p>
</div>
<p>:param formdata:
Used to pass data coming from the enduser, usually <code>request.POST</code> or
equivalent. formdata should be some sort of request-data wrapper which
can get multiple parameters from the form input, and values are unicode
strings, e.g. a Werkzeug/Django/WebOb MultiDict
:param obj:
If <code>formdata</code> is empty or not provided, this object is checked for
attributes matching form field names, which will be used for field
values.
:param prefix:
If provided, all fields will have their name prefixed with the
value.
:param data:
Accept a dictionary of data. This is only used if <code>formdata</code> and
<code>obj</code> are not present.
:param meta:
If provided, this is a dictionary of values to override attributes
on this form's meta instance.
:param <code>**kwargs</code>:
If <code>formdata</code> is empty or not provided and <code>obj</code> does not contain
an attribute named the same as a field, form will assign the value
of a matching keyword argument to the field, if one exists.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class LoginForm(Form):
    name = TextField(&#39;&#39;, [InputRequired()])
    password = PasswordField(&#39;&#39;, [InputRequired()])

    def validate_name(form, field):
        user = current_users.get_user(field.data)
        if not user:
            raise ValidationError(&#39;This username does not exist.&#39;)

    def validate_password(form, field):
        user = current_users.get_user(form.name.data)
        if not user:
            return
        if not user.check_password(field.data):
            raise ValidationError(&#39;Username and password do not match.&#39;)</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>flask_wtf.form.Form</li>
<li>flask_wtf.form.FlaskForm</li>
<li>wtforms.form.Form</li>
<li>wtforms.compat.NewBase</li>
<li>wtforms.form.BaseForm</li>
</ul>
<h3>Class variables</h3>
<dl>
<dt id="wiki.web.forms.LoginForm.name"><code class="name">var <span class="ident">name</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="wiki.web.forms.LoginForm.password"><code class="name">var <span class="ident">password</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="wiki.web.forms.LoginForm.validate_name"><code class="name flex">
<span>def <span class="ident">validate_name</span></span>(<span>form, field)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def validate_name(form, field):
    user = current_users.get_user(field.data)
    if not user:
        raise ValidationError(&#39;This username does not exist.&#39;)</code></pre>
</details>
</dd>
<dt id="wiki.web.forms.LoginForm.validate_password"><code class="name flex">
<span>def <span class="ident">validate_password</span></span>(<span>form, field)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def validate_password(form, field):
    user = current_users.get_user(form.name.data)
    if not user:
        return
    if not user.check_password(field.data):
        raise ValidationError(&#39;Username and password do not match.&#39;)</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="wiki.web.forms.SearchForm"><code class="flex name class">
<span>class <span class="ident">SearchForm</span></span>
<span>(</span><span>*args, **kwargs)</span>
</code></dt>
<dd>
<div class="desc"><div class="admonition deprecated">
<p class="admonition-title">Deprecated since version:&ensp;0.13</p>
<p>Renamed to :class:<code>~flask_wtf.FlaskForm</code>.</p>
</div>
<p>:param formdata:
Used to pass data coming from the enduser, usually <code>request.POST</code> or
equivalent. formdata should be some sort of request-data wrapper which
can get multiple parameters from the form input, and values are unicode
strings, e.g. a Werkzeug/Django/WebOb MultiDict
:param obj:
If <code>formdata</code> is empty or not provided, this object is checked for
attributes matching form field names, which will be used for field
values.
:param prefix:
If provided, all fields will have their name prefixed with the
value.
:param data:
Accept a dictionary of data. This is only used if <code>formdata</code> and
<code>obj</code> are not present.
:param meta:
If provided, this is a dictionary of values to override attributes
on this form's meta instance.
:param <code>**kwargs</code>:
If <code>formdata</code> is empty or not provided and <code>obj</code> does not contain
an attribute named the same as a field, form will assign the value
of a matching keyword argument to the field, if one exists.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class SearchForm(Form):
    term = TextField(&#39;&#39;, [InputRequired()])
    ignore_case = BooleanField(
        description=&#39;Ignore Case&#39;,
        # FIXME: default is not correctly populated
        default=True)</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>flask_wtf.form.Form</li>
<li>flask_wtf.form.FlaskForm</li>
<li>wtforms.form.Form</li>
<li>wtforms.compat.NewBase</li>
<li>wtforms.form.BaseForm</li>
</ul>
<h3>Class variables</h3>
<dl>
<dt id="wiki.web.forms.SearchForm.ignore_case"><code class="name">var <span class="ident">ignore_case</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="wiki.web.forms.SearchForm.term"><code class="name">var <span class="ident">term</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
</dd>
<dt id="wiki.web.forms.URLForm"><code class="flex name class">
<span>class <span class="ident">URLForm</span></span>
<span>(</span><span>*args, **kwargs)</span>
</code></dt>
<dd>
<div class="desc"><div class="admonition deprecated">
<p class="admonition-title">Deprecated since version:&ensp;0.13</p>
<p>Renamed to :class:<code>~flask_wtf.FlaskForm</code>.</p>
</div>
<p>:param formdata:
Used to pass data coming from the enduser, usually <code>request.POST</code> or
equivalent. formdata should be some sort of request-data wrapper which
can get multiple parameters from the form input, and values are unicode
strings, e.g. a Werkzeug/Django/WebOb MultiDict
:param obj:
If <code>formdata</code> is empty or not provided, this object is checked for
attributes matching form field names, which will be used for field
values.
:param prefix:
If provided, all fields will have their name prefixed with the
value.
:param data:
Accept a dictionary of data. This is only used if <code>formdata</code> and
<code>obj</code> are not present.
:param meta:
If provided, this is a dictionary of values to override attributes
on this form's meta instance.
:param <code>**kwargs</code>:
If <code>formdata</code> is empty or not provided and <code>obj</code> does not contain
an attribute named the same as a field, form will assign the value
of a matching keyword argument to the field, if one exists.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class URLForm(Form):
    url = TextField(&#39;&#39;, [InputRequired()])

    def validate_url(form, field):
        if current_wiki.exists(field.data):
            raise ValidationError(&#39;The URL &#34;%s&#34; exists already.&#39; % field.data)

    def clean_url(self, url):
        return clean_url(url)</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>flask_wtf.form.Form</li>
<li>flask_wtf.form.FlaskForm</li>
<li>wtforms.form.Form</li>
<li>wtforms.compat.NewBase</li>
<li>wtforms.form.BaseForm</li>
</ul>
<h3>Class variables</h3>
<dl>
<dt id="wiki.web.forms.URLForm.url"><code class="name">var <span class="ident">url</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="wiki.web.forms.URLForm.clean_url"><code class="name flex">
<span>def <span class="ident">clean_url</span></span>(<span>self, url)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def clean_url(self, url):
    return clean_url(url)</code></pre>
</details>
</dd>
<dt id="wiki.web.forms.URLForm.validate_url"><code class="name flex">
<span>def <span class="ident">validate_url</span></span>(<span>form, field)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def validate_url(form, field):
    if current_wiki.exists(field.data):
        raise ValidationError(&#39;The URL &#34;%s&#34; exists already.&#39; % field.data)</code></pre>
</details>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="wiki.web" href="index.html">wiki.web</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="wiki.web.forms.EditorForm" href="#wiki.web.forms.EditorForm">EditorForm</a></code></h4>
<ul class="">
<li><code><a title="wiki.web.forms.EditorForm.body" href="#wiki.web.forms.EditorForm.body">body</a></code></li>
<li><code><a title="wiki.web.forms.EditorForm.tags" href="#wiki.web.forms.EditorForm.tags">tags</a></code></li>
<li><code><a title="wiki.web.forms.EditorForm.title" href="#wiki.web.forms.EditorForm.title">title</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="wiki.web.forms.LoginForm" href="#wiki.web.forms.LoginForm">LoginForm</a></code></h4>
<ul class="">
<li><code><a title="wiki.web.forms.LoginForm.name" href="#wiki.web.forms.LoginForm.name">name</a></code></li>
<li><code><a title="wiki.web.forms.LoginForm.password" href="#wiki.web.forms.LoginForm.password">password</a></code></li>
<li><code><a title="wiki.web.forms.LoginForm.validate_name" href="#wiki.web.forms.LoginForm.validate_name">validate_name</a></code></li>
<li><code><a title="wiki.web.forms.LoginForm.validate_password" href="#wiki.web.forms.LoginForm.validate_password">validate_password</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="wiki.web.forms.SearchForm" href="#wiki.web.forms.SearchForm">SearchForm</a></code></h4>
<ul class="">
<li><code><a title="wiki.web.forms.SearchForm.ignore_case" href="#wiki.web.forms.SearchForm.ignore_case">ignore_case</a></code></li>
<li><code><a title="wiki.web.forms.SearchForm.term" href="#wiki.web.forms.SearchForm.term">term</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="wiki.web.forms.URLForm" href="#wiki.web.forms.URLForm">URLForm</a></code></h4>
<ul class="">
<li><code><a title="wiki.web.forms.URLForm.clean_url" href="#wiki.web.forms.URLForm.clean_url">clean_url</a></code></li>
<li><code><a title="wiki.web.forms.URLForm.url" href="#wiki.web.forms.URLForm.url">url</a></code></li>
<li><code><a title="wiki.web.forms.URLForm.validate_url" href="#wiki.web.forms.URLForm.validate_url">validate_url</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.10.0</a>.</p>
</footer>
</body>
</html>